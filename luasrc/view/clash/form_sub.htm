<%+cbi/valueheader%>
<input type="button" class="cbi-button cbi-button-apply" id="apply_update_button" value="<%:Delete Config%>" onclick=" return apply_del_conf() "/>
<input type="button" class="cbi-button cbi-button-apply" value="<%:Download Config%>" style=" display:inline;" onclick=" return download_conf()" />
<input type="button" class="cbi-button cbi-button-apply" value="<%:Save & Apply%>" style=" display:inline;" onclick=" return apply_change_conf()" />
<textarea id="cbid.logview.1.conf" class="cbi-input-textarea" style="width: 100%;display:inline" data-update="change" rows="20" readonly="readonly" > </textarea>

<script type="text/javascript">//<![CDATA[

function DownloadFile(fileName, content) {
    var aTag = document.createElement('a');
    var blob = new Blob([content]);
    aTag.download = fileName;
    aTag.href = URL.createObjectURL(blob);
    aTag.click();
    URL.revokeObjectURL(blob);
}

function download_conf(){
	var lv = document.getElementById('cbid.logview.1.conf');
	var dt = new Date();
	DownloadFile("config.yaml",lv.innerHTML)
	return
}


function apply_del_conf(){
	XHR.get('<%=url([[admin]], [[services]], [[clash]], [[dellog]])%>',null,function(x, data){}
	);
	return
}


function apply_change_conf(){
	XHR.get('<%=url([[admin]], [[services]], [[clash]], [[apply]])%>',null,function(x, data){}
	);
	return
}

//]]>
</script>	
<%+cbi/valuefooter%>